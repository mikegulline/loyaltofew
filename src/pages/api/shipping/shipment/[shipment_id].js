// get shipment by shipment_id
import nc from 'next-connect';
import api from '@/utils/easyPostApi';

const handler = nc();

handler.get(async (req, res) => {
  const { shipment_id } = req.query;

  try {
    const shipment = await api.Shipment.retrieve(shipment_id);
    res.status(200).json({ shipment });
  } catch (error) {
    res.status(404).json({ error, message: 'Shipment not found' });
  }
});

export default handler;

// const shipmentAPIResponse = {
//   shipment: {
//     id: 'shp_e6702dc41c154a49b970325daea6e45e',
//     object: 'Shipment',
//     mode: 'production',
//     created_at: '2023-08-25T04:59:54Z',
//     updated_at: '2023-08-25T08:13:09Z',
//     to_address: {
//       id: 'adr_3ae1687f430411ee9142ac1f6bc539ae',
//     },
//     from_address: {
//       id: 'adr_3ae3c8cd430411eeae09ac1f6bc539aa',
//     },
//     return_address: {
//       id: 'adr_3ae3c8cd430411eeae09ac1f6bc539aa',
//     },
//     buyer_address: {
//       id: 'adr_3ae1687f430411ee9142ac1f6bc539ae',
//     },
//     parcel: {
//       id: 'prcl_ac544fc505bd46a2bbc649d21f42f69b',
//     },
//     forms: [],
//     rates: [
//       {
//         id: 'rate_2eb83095b45a479a96345b8cc2019144',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'Express',
//         carrier: 'USPS',
//         rate: '29.65',
//         currency: 'USD',
//         retail_rate: '34.10',
//         retail_currency: 'USD',
//         list_rate: '29.65',
//         list_currency: 'USD',
//         billing_type: 'easypost',
//         delivery_days: null,
//         delivery_date: null,
//         delivery_date_guaranteed: false,
//         est_delivery_days: null,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_c96ca3ce49094b3795fe439c3f95d39f',
//       },
//       {
//         id: 'rate_e2b45a761f3f44bbb7d70f409aeaa583',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'Priority',
//         carrier: 'USPS',
//         rate: '6.98',
//         currency: 'USD',
//         retail_rate: '10.55',
//         retail_currency: 'USD',
//         list_rate: '8.45',
//         list_currency: 'USD',
//         billing_type: 'easypost',
//         delivery_days: 2,
//         delivery_date: null,
//         delivery_date_guaranteed: false,
//         est_delivery_days: 2,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_c96ca3ce49094b3795fe439c3f95d39f',
//       },
//       {
//         id: 'rate_25c9fd7b9ebe42269483d9e05aed17e9',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'GroundAdvantage',
//         carrier: 'USPS',
//         rate: '6.77',
//         currency: 'USD',
//         retail_rate: '9.55',
//         retail_currency: 'USD',
//         list_rate: '7.15',
//         list_currency: 'USD',
//         billing_type: 'easypost',
//         delivery_days: 2,
//         delivery_date: null,
//         delivery_date_guaranteed: false,
//         est_delivery_days: 2,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_c96ca3ce49094b3795fe439c3f95d39f',
//       },
//       {
//         id: 'rate_abd5f607880f49fb9d225abae3eac119',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'First',
//         carrier: 'USPS',
//         rate: '6.77',
//         currency: 'USD',
//         retail_rate: '9.55',
//         retail_currency: 'USD',
//         list_rate: '7.15',
//         list_currency: 'USD',
//         billing_type: 'easypost',
//         delivery_days: 2,
//         delivery_date: null,
//         delivery_date_guaranteed: false,
//         est_delivery_days: 2,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_c96ca3ce49094b3795fe439c3f95d39f',
//       },
//       {
//         id: 'rate_e8e125707b26407eb75eca90c8db6eec',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'ParcelSelect',
//         carrier: 'USPS',
//         rate: '6.77',
//         currency: 'USD',
//         retail_rate: '9.55',
//         retail_currency: 'USD',
//         list_rate: '7.15',
//         list_currency: 'USD',
//         billing_type: 'easypost',
//         delivery_days: 2,
//         delivery_date: null,
//         delivery_date_guaranteed: false,
//         est_delivery_days: 2,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_c96ca3ce49094b3795fe439c3f95d39f',
//       },
//       {
//         id: 'rate_1aab78dfe5df4931a320b83bb2c26cb8',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'NextDayAir',
//         carrier: 'UPS',
//         rate: '72.52',
//         currency: 'USD',
//         retail_rate: '71.42',
//         retail_currency: 'USD',
//         list_rate: '66.79',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 1,
//         delivery_date: '2023-08-28T10:30:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 1,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_8a67eeb0159e4220af0e715f4998e902',
//       },
//       {
//         id: 'rate_f7ed092b018b459786aa23a618683e0a',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: '2ndDayAir',
//         carrier: 'UPS',
//         rate: '36.11',
//         currency: 'USD',
//         retail_rate: '33.76',
//         retail_currency: 'USD',
//         list_rate: '33.49',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 2,
//         delivery_date: '2023-08-29T23:00:00Z',
//         delivery_date_guaranteed: false,
//         est_delivery_days: 2,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_8a67eeb0159e4220af0e715f4998e902',
//       },
//       {
//         id: 'rate_cdcba074065a4179a3c5ad232a1a450b',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'Ground',
//         carrier: 'UPS',
//         rate: '19.89',
//         currency: 'USD',
//         retail_rate: '13.34',
//         retail_currency: 'USD',
//         list_rate: '18.58',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 2,
//         delivery_date: '2023-08-29T23:00:00Z',
//         delivery_date_guaranteed: false,
//         est_delivery_days: 2,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_8a67eeb0159e4220af0e715f4998e902',
//       },
//       {
//         id: 'rate_7c2421d97def4779a032979b14309656',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: '3DaySelect',
//         carrier: 'UPS',
//         rate: '27.98',
//         currency: 'USD',
//         retail_rate: '26.31',
//         retail_currency: 'USD',
//         list_rate: '25.92',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 3,
//         delivery_date: '2023-08-30T23:00:00Z',
//         delivery_date_guaranteed: false,
//         est_delivery_days: 3,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_8a67eeb0159e4220af0e715f4998e902',
//       },
//       {
//         id: 'rate_88415169face4e5180ef2364dc63f9f2',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'NextDayAirSaver',
//         carrier: 'UPS',
//         rate: '65.65',
//         currency: 'USD',
//         retail_rate: '61.07',
//         retail_currency: 'USD',
//         list_rate: '60.45',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 1,
//         delivery_date: '2023-08-28T23:00:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 1,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_8a67eeb0159e4220af0e715f4998e902',
//       },
//       {
//         id: 'rate_ac6d3f537dfb45148a7df519f5403460',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'NextDayAirEarlyAM',
//         carrier: 'UPS',
//         rate: '107.85',
//         currency: 'USD',
//         retail_rate: '106.74',
//         retail_currency: 'USD',
//         list_rate: '102.11',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 1,
//         delivery_date: '2023-08-28T08:00:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 1,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_8a67eeb0159e4220af0e715f4998e902',
//       },
//       {
//         id: 'rate_844ab8a3db344aa3a797496404d5047f',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'FIRST_OVERNIGHT',
//         carrier: 'FedEx',
//         rate: '101.45',
//         currency: 'USD',
//         retail_rate: null,
//         retail_currency: null,
//         list_rate: '101.45',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 3,
//         delivery_date: '2023-08-28T08:30:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 3,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_daf8afd63b7643b993ca8c2441155c0d',
//       },
//       {
//         id: 'rate_94f74784d6c342d5a6bf561aadd838d3',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'PRIORITY_OVERNIGHT',
//         carrier: 'FedEx',
//         rate: '35.73',
//         currency: 'USD',
//         retail_rate: null,
//         retail_currency: null,
//         list_rate: '64.95',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 3,
//         delivery_date: '2023-08-28T10:30:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 3,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_daf8afd63b7643b993ca8c2441155c0d',
//       },
//       {
//         id: 'rate_6f6de207233240a8a89636a29966678c',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'STANDARD_OVERNIGHT',
//         carrier: 'FedEx',
//         rate: '31.99',
//         currency: 'USD',
//         retail_rate: null,
//         retail_currency: null,
//         list_rate: '58.17',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 3,
//         delivery_date: '2023-08-28T17:00:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 3,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_daf8afd63b7643b993ca8c2441155c0d',
//       },
//       {
//         id: 'rate_5f8cc9360d3b43f98320738bb1c7d02c',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'FEDEX_2_DAY_AM',
//         carrier: 'FedEx',
//         rate: '22.45',
//         currency: 'USD',
//         retail_rate: null,
//         retail_currency: null,
//         list_rate: '32.44',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 4,
//         delivery_date: '2023-08-29T10:30:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 4,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_daf8afd63b7643b993ca8c2441155c0d',
//       },
//       {
//         id: 'rate_673f31cc07a441c5b9759e779f8d3e4d',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'FEDEX_2_DAY',
//         carrier: 'FedEx',
//         rate: '20.18',
//         currency: 'USD',
//         retail_rate: null,
//         retail_currency: null,
//         list_rate: '29.10',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 4,
//         delivery_date: '2023-08-29T17:00:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 4,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_daf8afd63b7643b993ca8c2441155c0d',
//       },
//       {
//         id: 'rate_20ee22deba4e419fbde890c2bd9585e8',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'FEDEX_GROUND',
//         carrier: 'FedEx',
//         rate: '11.69',
//         currency: 'USD',
//         retail_rate: null,
//         retail_currency: null,
//         list_rate: '13.90',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 2,
//         delivery_date: '2023-08-29T23:59:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 2,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_daf8afd63b7643b993ca8c2441155c0d',
//       },
//       {
//         id: 'rate_07920db957714a039218beeeb2ed56e9',
//         object: 'Rate',
//         created_at: '2023-08-25T04:59:55Z',
//         updated_at: '2023-08-25T04:59:55Z',
//         mode: 'production',
//         service: 'FEDEX_EXPRESS_SAVER',
//         carrier: 'FedEx',
//         rate: '19.11',
//         currency: 'USD',
//         retail_rate: null,
//         retail_currency: null,
//         list_rate: '25.74',
//         list_currency: 'USD',
//         billing_type: 'carrier',
//         delivery_days: 5,
//         delivery_date: '2023-08-30T17:00:00Z',
//         delivery_date_guaranteed: true,
//         est_delivery_days: 5,
//         shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//         carrier_account_id: 'ca_daf8afd63b7643b993ca8c2441155c0d',
//       },
//     ],
//     selected_rate: {
//       id: 'rate_25c9fd7b9ebe42269483d9e05aed17e9',
//       object: 'Rate',
//       created_at: '2023-08-25T05:00:54Z',
//       updated_at: '2023-08-25T05:00:54Z',
//       mode: 'production',
//       service: 'GroundAdvantage',
//       carrier: 'USPS',
//       rate: '6.77',
//       currency: 'USD',
//       retail_rate: '9.55',
//       retail_currency: 'USD',
//       list_rate: '7.15',
//       list_currency: 'USD',
//       billing_type: 'easypost',
//       delivery_days: 2,
//       delivery_date: null,
//       delivery_date_guaranteed: false,
//       est_delivery_days: 2,
//       shipment_id: 'shp_e6702dc41c154a49b970325daea6e45e',
//       carrier_account_id: 'ca_c96ca3ce49094b3795fe439c3f95d39f',
//     },
//     postage_label: {
//       object: 'PostageLabel',
//       id: 'pl_2dee275659c1492b969c68fd9ba73aa0',
//       created_at: '2023-08-25T05:00:54Z',
//       updated_at: '2023-08-25T05:00:55Z',
//       date_advance: 0,
//       integrated_form: 'none',
//       label_date: '2023-08-25T05:00:54Z',
//       label_resolution: 300,
//       label_size: '4x6',
//       label_type: 'default',
//       label_file_type: 'image/png',
//       label_url:
//         'https://easypost-files.s3.us-west-2.amazonaws.com/files/postage_label/20230825/e87c5ebbf8f8664415b766c4595cd7574d.png',
//       label_pdf_url: null,
//       label_zpl_url: null,
//       label_epl2_url: null,
//       label_file: null,
//     },
//     messages: [],
//     options: {
//       currency: 'USD',
//       payment: {
//         type: 'SENDER',
//       },
//       date_advance: 0,
//     },
//     tracking_code: '9434636105440268209226',
//     usps_zone: 3,
//     status: 'pre_transit',
//     tracker: {
//       id: 'trk_4550fbba2baf4b968256eb57ea716cbc',
//     },
//     fees: [
//       {
//         object: 'Fee',
//         type: 'LabelFee',
//         amount: '0.00000',
//         charged: true,
//         refunded: false,
//       },
//       {
//         object: 'Fee',
//         type: 'PostageFee',
//         amount: '6.77000',
//         charged: true,
//         refunded: false,
//       },
//     ],
//   },
// };
